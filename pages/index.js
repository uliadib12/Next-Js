import Head from 'next/head'
import { Logo } from '../components/logo'
import { DropDownList, Navbar, NavbarList } from '../components/navbar'
import {BsFillBagFill} from "react-icons/bs"
import {IoLocationSharp} from "react-icons/io5"
import {CgProfile} from "react-icons/cg"
import {IoMdSearch} from "react-icons/io"
import { Sidebar, SidebarList } from '../components/sidebar'
import { Body } from '../components/body'
import { Modal } from '../components/modal'
import { createContext, useContext, useEffect, useState } from 'react'

export const modalContex = createContext()

export default function Home() {

  const [modalShow, setmodalShow] = useState(false)
  const [walletShow, setwalletShow] = useState(false)
  const [walletPass, setwalletPass] = useState("")
  const [onClick, setonClick] = useState(false)

  useEffect(() => {
    setwalletPass("")
    setonClick(false)
  }, [modalShow,walletShow])
  

  function getData(obj) {
    if(obj){
      const nama = obj.nama
      const alamat = obj.alamat
      const count = obj.count
      const wallet = obj.wallet
      console.log(`Nama: ${nama} Alamat: ${alamat} Count: ${count} Wallet: ${wallet} WalletPass: ${walletPass}`)
      setwalletShow(false)
    }
  }
  return (
    <>

      <Head>
        <title>My Shoes</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
        <link rel="preconnect" href="https://fonts.googleapis.com"/>
        <link rel="preconnect" href="https://fonts.gstatic.com" crossOrigin={true}/>
        <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap" rel="stylesheet"></link>
        <link href="https://fonts.googleapis.com/css2?family=Lato:wght@900&display=swap" rel="stylesheet"></link>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@600&display=swap" rel="stylesheet"></link>
      </Head>

      <main className='relative flex flex-col bg-gradient-to-r from-red-900 via-red-500 to-red-900 w-screen min-h-screen pb-6'>
        
        <div id='topBar' className='flex flex-col justify-center sm:flex-row sm:justify-start'>

          <Logo className="flex justify-center sm:justify-start cursor-pointer"/>

          <Navbar>
            <NavbarList isDropdown={true} text="MENS">
              <DropDownList text="a"/>
              <DropDownList text="b"/>
              <DropDownList text="c"/>
            </NavbarList>
            <NavbarList isDropdown={true} text="WOMEN">
              <DropDownList text="a"/>
              <DropDownList text="b"/>
              <DropDownList text="c"/>
            </NavbarList>
            <NavbarList isDropdown={true} text="KIDS">
              <DropDownList text="a"/>
              <DropDownList text="b"/>
              <DropDownList text="c"/>
            </NavbarList>
            <NavbarList isDropdown={false} text="COSTUMIZE"/>
          </Navbar>

          <Sidebar>
            <SidebarList href="/cart" carts={true} icon={BsFillBagFill}/>
            <SidebarList icon={IoLocationSharp}/>
            <SidebarList icon={CgProfile}/>
            <SidebarList icon={IoMdSearch}/>
          </Sidebar>

        </div>
        
          {/* Main Content */}
          <modalContex.Provider value={{modalShow,setmodalShow,walletShow,setwalletShow,onClick,setonClick}}>
            <Body
            imgSrc = "/img/shoes-hero.png"
            nameProduct= "NIKE AIR"
            category = "MEN'S ORIGINAL"
            price = {120}
            />

            <Modal nameProduct= "NIKE AIR" imgSrc = "/img/shoes-hero.png" price = {120} fun={getData}/>

          </modalContex.Provider>

          {modalShow && walletShow && <div className='absolute inset-0 flex justify-center items-center pointer-events-none'>
            <div className='pointer-events-auto bg-white w-80 h-48 rounded-lg border-blue-200 border-4 p-4'>
              <div className='font-bold text-lg'>
                Wallet Pass
              </div>
              <div className="mt-6 mb-6">
                <input value={walletPass} onChange={(e)=>{setwalletPass(e.target.value)}} className="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" id="walletPass" type="password" placeholder="*******"/>
              </div>
              <div className='flex gap-2 justify-end'>
                <button onClick={() => {setonClick(true)}} className='p-2 hover:scale-110 bg-blue-500 rounded-md font-bold text-white'>OK</button>
                <button onClick={() => {setwalletShow(false)}} className='p-2 hover:scale-110 bg-blue-500 rounded-md font-bold text-white'>CANCLE</button>
              </div>
            </div>
          </div>}

      </main>
    </>
  )
}
